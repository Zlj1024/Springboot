{"version":3,"sources":["components/app.jsx","components/data.jsx","components/loginlist.jsx","components/userlist.jsx","components/router/router.js","index.js"],"names":["App","props","handlePage","userName","state","pwd","history","setState","uname","upwd","url","axios","get","then","res","undefined","data","id","timeUrl","respose","console","log","sessionStorage","setItem","replace","pathname","catch","error","handleChange","bind","handleUser","event","target","value","this","length","substring","setTimeout","className","type","placeholder","onChange","htmlFor","onClick","name","Component","withRouter","TrData","users","map","user","i","key","loginTime","LoginList","isLoaded","_this","getItem","UserList","BasicRoute","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d4ef97d2.chunk.js","sourcesContent":["import React,{Component} from 'react'\r\nimport './app.css'\r\nimport { withRouter } from 'react-router-dom'\r\n//import moment from 'moment'\r\nimport axios from 'axios'\r\nclass App extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            userName:'',\r\n            pwd:'',\r\n            uname:'',\r\n            upwd:''\r\n        }\r\n        //this.handleSubmit=this.handleSubmit.bind(this)\r\n        this.handleChange=this.handleChange.bind(this)\r\n        this.handleUser=this.handleUser.bind(this)\r\n        this.handlePage=this.handlePage.bind(this)\r\n      }\r\n    // handleSubmit(event){\r\n    //     const {userName,pwd}=this.state\r\n    //     event.preventDefault()\r\n    //     alert(`获取的用户名为${userName},密码为${pwd}`)\r\n    //\r\n    // }\r\n    handleUser(event){\r\n        const userName=event.target.value\r\n        this.setState({userName})\r\n    }\r\n    handleChange(event){\r\n        const pwd=event.target.value\r\n        const length=pwd.length;\r\n        this.setState({pwd:pwd.substring(0,6)})\r\n        if(length>6){\r\n            this.setState({error:\"*不能输出超过6位\"})\r\n            setTimeout(function () {\r\n                this.setState({error:\"\"})\r\n\r\n            }.bind(this),1000)\r\n        }else{\r\n            this.setState({error:\"\"})\r\n        }\r\n    }\r\n    handlePage=()=>\r\n    {\r\n        const {userName}=this.state\r\n        const {pwd}=this.state\r\n        let { history } = this.props\r\n\r\n        if(userName===\"\"||userName===null){\r\n           this.setState({uname:'用户名不能为空',upwd:''})\r\n        }\r\n       else if(pwd===\"\"||pwd===null)\r\n        {\r\n            this.setState({uname:'',upwd:'密码不能为空'})\r\n        }\r\n        else  if(userName===\"\"&&pwd===\"\"){\r\n            this.setState({uname:'用户名不能为空',upwd:'密码不能为空'})\r\n        }\r\n        else{\r\n            const url=\"http://localhost:8081/login?userName=\"+userName+\"&password=\"+pwd\r\n            axios.get(url).then((res)=>{\r\n                //console.log(res.data)\r\n                 if(res.data.id===undefined)\r\n                 {\r\n                     this.setState({uname:'该用户不存在',upwd:''})\r\n                 }else{\r\n\r\n                     //const time=moment().format('YYYY-MM-DD HH:mm:ss')\r\n                     const timeUrl=\"http://localhost:8081/modifyTime?id=\"+res.data.id\r\n                     //正确获取当前时间和用户\r\n                     //console.log(time)\r\n                     //console.log(timeUrl)\r\n                     axios.get(timeUrl).then((respose)=>\r\n                     {\r\n                         console.log(respose.data)\r\n                         sessionStorage.setItem(\"userName\",userName)\r\n                         //这样更新登录获取当前时间\r\n                         history.replace({pathname: '/userlist'})\r\n                     })\r\n                     //放在外面获取上次登录时间再更新数据\r\n                    //history.replace({pathname: '/userlist',state:res.data})\r\n                    //history.replace({pathname: '/userlist/'+userName})\r\n                 }\r\n\r\n            }).catch(function (error) {\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n    render()\r\n        {\r\n            const {userName,pwd}=this.state\r\n            return(\r\n                <div className=\"myApp\">\r\n                    <div className=\"appBody\">\r\n                        <p className=\"title\">欢迎登录</p>\r\n                        <form className=\"loginPage\">\r\n                            <div className=\"formContent\">\r\n                                <span className=\"userError\">{this.state.uname}</span>\r\n                               <input type=\"text\" placeholder=\"用户名\" className=\"content\" value={userName} onChange={this.handleUser}/>\r\n                            </div>\r\n                            <div className=\"formContent\">\r\n                                <span className=\"pwdError\">{this.state.upwd}</span>\r\n                                <input type=\"password\" placeholder=\"密码\" className=\"content\" value={pwd} onChange={this.handleChange}/>\r\n                                <label htmlFor=\"title\">{this.state.error}</label>\r\n                            </div>\r\n                            <div className=\"allButton\">\r\n                                <div className=\"leftBtn\">\r\n                                    <button className=\"doLogin\" onClick={this.handlePage}>登录</button>\r\n                                </div>\r\n                                <div className=\"rightBtn\">\r\n                                    <input name=\"register\" type=\"button\" className=\"doRegister\" value=\"注册\"/>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                        </div>\r\n                </div>\r\n             )\r\n\r\n        }\r\n  }\r\nexport default withRouter(App)","import React,{Component} from 'react'\r\nexport default class TrData extends Component{\r\n    render(){\r\n           return (\r\n             this.props.users.map((user,i)=>{\r\n                return (\r\n                    <tr key={i} className=\"text-center\">\r\n                        <td>{i+1}</td>\r\n                        <td>{user.userName}</td>\r\n                        <td>{user.loginTime}</td>\r\n                    </tr>\r\n                )\r\n            })\r\n        )\r\n    }\r\n}","import React,{Component} from 'react'\r\nimport TrData from './data'\r\nimport axios from 'axios'\r\nimport './loginlist.css'\r\nimport { withRouter } from 'react-router-dom'\r\nexport default class LoginList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            isLoaded: false\r\n        }\r\n    }\r\n    componentDidMount()\r\n        {\r\n            //先存一下this，以防使用箭头函数this会指向我们不希望它所指向的对象。\r\n            const _this=this\r\n            console.log(this)\r\n            console.log(_this)\r\n            //console.log(sessionStorage.getItem(\"userName\"))\r\n            console.log(_this.props.history)\r\n            if(sessionStorage.getItem(\"userName\")==null){\r\n                console.log(\"11111\")\r\n                _this.props.history.replace({pathname: '/'})\r\n            }\r\n            else{\r\n                axios.get('http://localhost:8081/getUser')\r\n                    .then(function (res) {\r\n                        console.log(res.data)\r\n                        _this.setState({\r\n                            users: res.data,\r\n                            isLoaded: true\r\n                        })\r\n                    }).catch(function (error) {\r\n                    console.log(\"error\", error)\r\n                    _this.setState({\r\n                        isLoaded:false,\r\n                        error:error\r\n                    })\r\n\r\n                })\r\n\r\n            }\r\n\r\n        }\r\n    render() {\r\n        if (!this.state.isLoaded) {\r\n            return <div>Loading</div>\r\n        } else {\r\n            return (\r\n                <table className=\"table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th className=\"text-center\"></th>\r\n                        <th className=\"text-center\">姓名</th>\r\n                        <th className=\"text-center\">登陆时间</th>\r\n                      </tr>\r\n                    </thead>\r\n                 <tbody>\r\n                    <TrData users={this.state.users}/>\r\n                 </tbody>\r\n            </table>\r\n            )\r\n        }\r\n    }\r\n}","import React,{Component} from 'react'\r\nimport LoginList from './loginlist'\r\nimport './userlist.css'\r\nexport default class UserList extends Component\r\n       {\r\n           constructor(props){\r\n               super(props)\r\n               this.state={\r\n                   userName:''\r\n               }\r\n           }\r\n         /*  componentDidMount(){\r\n               //获取当前用户名\r\n               //console.log(this.props.location.state.userName)\r\n               this.setState({\r\n                   userName:this.props.location.state.userName\r\n                  /!* userName:this.props.match.params.userName*!/\r\n\r\n               })\r\n           }*/\r\n           render(){\r\n               return(\r\n                   <div className=\"list\">\r\n                       <div className=\"foot\">\r\n                           <h2>欢迎您 <span className=\"name\">{sessionStorage.getItem(\"userName\")}</span></h2>\r\n                       </div>\r\n                       <div className=\"left\">\r\n                           <ul>\r\n                               <li className=\"first\">首页</li>\r\n                                   <ul className=\"second\">\r\n                                     <li>登录列表</li>\r\n                                   </ul>\r\n                           </ul>\r\n                       </div>\r\n                       <div className=\"list\">\r\n                           <div className=\"title\">\r\n                               <p>登陆历史</p>\r\n                               <LoginList history={this.props.history} />\r\n                           </div>\r\n                       </div>\r\n                   </div>\r\n               )\r\n           }\r\n\r\n}","import React from 'react';\r\nimport {BrowserRouter,HashRouter, Route, Switch} from 'react-router-dom';\r\nimport App from '../app';\r\nimport UserList from '../userlist';\r\nconst BasicRoute = () => (\r\n    <HashRouter>\r\n        <Switch>\r\n            <Route exact path=\"/\" component={App}/>\r\n            <Route exact path=\"/userlist\" component={UserList}/>\r\n            {/*<Route exact path=\"/userlist/:userName\" component={UserList}/>*/}\r\n        </Switch>\r\n    </HashRouter>\r\n)\r\n\r\nexport default BasicRoute","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport Router from './components/router/router';\r\nReactDOM.render(<Router/>,document.getElementById('root'))"],"sourceRoot":""}