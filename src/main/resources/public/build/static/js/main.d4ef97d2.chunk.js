(this["webpackJsonpmy-foreapp"]=this["webpackJsonpmy-foreapp"]||[]).push([[0],{33:function(e,t,a){e.exports=a(63)},38:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(30),r=a.n(l),c=a(16),o=a(11),i=a(6),m=a(7),u=a(9),h=a(8),d=a(13),p=a(10),E=(a(38),a(15)),f=a.n(E),g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handlePage=function(){var e=a.state.userName,t=a.state.pwd,n=a.props.history;if(""===e||null===e)a.setState({uname:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a",upwd:""});else if(""===t||null===t)a.setState({uname:"",upwd:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"});else if(""===e&&""===t)a.setState({uname:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a",upwd:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"});else{var s="http://localhost:8081/login?userName="+e+"&password="+t;f.a.get(s).then((function(t){if(void 0===t.data.id)a.setState({uname:"\u8be5\u7528\u6237\u4e0d\u5b58\u5728",upwd:""});else{var s="http://localhost:8081/modifyTime?id="+t.data.id;f.a.get(s).then((function(t){console.log(t.data),sessionStorage.setItem("userName",e),n.replace({pathname:"/userlist"})}))}})).catch((function(e){}))}},a.state={userName:"",pwd:"",uname:"",upwd:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleUser=a.handleUser.bind(Object(d.a)(a)),a.handlePage=a.handlePage.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleUser",value:function(e){var t=e.target.value;this.setState({userName:t})}},{key:"handleChange",value:function(e){var t=e.target.value,a=t.length;this.setState({pwd:t.substring(0,6)}),a>6?(this.setState({error:"*\u4e0d\u80fd\u8f93\u51fa\u8d85\u8fc76\u4f4d"}),setTimeout(function(){this.setState({error:""})}.bind(this),1e3)):this.setState({error:""})}},{key:"render",value:function(){var e=this.state,t=e.userName,a=e.pwd;return s.a.createElement("div",{className:"myApp"},s.a.createElement("div",{className:"appBody"},s.a.createElement("p",{className:"title"},"\u6b22\u8fce\u767b\u5f55"),s.a.createElement("form",{className:"loginPage"},s.a.createElement("div",{className:"formContent"},s.a.createElement("span",{className:"userError"},this.state.uname),s.a.createElement("input",{type:"text",placeholder:"\u7528\u6237\u540d",className:"content",value:t,onChange:this.handleUser})),s.a.createElement("div",{className:"formContent"},s.a.createElement("span",{className:"pwdError"},this.state.upwd),s.a.createElement("input",{type:"password",placeholder:"\u5bc6\u7801",className:"content",value:a,onChange:this.handleChange}),s.a.createElement("label",{htmlFor:"title"},this.state.error)),s.a.createElement("div",{className:"allButton"},s.a.createElement("div",{className:"leftBtn"},s.a.createElement("button",{className:"doLogin",onClick:this.handlePage},"\u767b\u5f55")),s.a.createElement("div",{className:"rightBtn"},s.a.createElement("input",{name:"register",type:"button",className:"doRegister",value:"\u6ce8\u518c"}))))))}}]),t}(n.Component),N=Object(o.f)(g),b=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.props.users.map((function(e,t){return s.a.createElement("tr",{key:t,className:"text-center"},s.a.createElement("td",null,t+1),s.a.createElement("td",null,e.userName),s.a.createElement("td",null,e.loginTime))}))}}]),t}(n.Component),v=(a(61),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={users:[],isLoaded:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this),console.log(e),console.log(e.props.history),null==sessionStorage.getItem("userName")?(console.log("11111"),e.props.history.replace({pathname:"/"})):f.a.get("http://localhost:8081/getUser").then((function(t){console.log(t.data),e.setState({users:t.data,isLoaded:!0})})).catch((function(t){console.log("error",t),e.setState({isLoaded:!1,error:t})}))}},{key:"render",value:function(){return this.state.isLoaded?s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"text-center"}),s.a.createElement("th",{className:"text-center"},"\u59d3\u540d"),s.a.createElement("th",{className:"text-center"},"\u767b\u9646\u65f6\u95f4"))),s.a.createElement("tbody",null,s.a.createElement(b,{users:this.state.users}))):s.a.createElement("div",null,"Loading")}}]),t}(n.Component)),j=(a(62),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={userName:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"list"},s.a.createElement("div",{className:"foot"},s.a.createElement("h2",null,"\u6b22\u8fce\u60a8 ",s.a.createElement("span",{className:"name"},sessionStorage.getItem("userName")))),s.a.createElement("div",{className:"left"},s.a.createElement("ul",null,s.a.createElement("li",{className:"first"},"\u9996\u9875"),s.a.createElement("ul",{className:"second"},s.a.createElement("li",null,"\u767b\u5f55\u5217\u8868")))),s.a.createElement("div",{className:"list"},s.a.createElement("div",{className:"title"},s.a.createElement("p",null,"\u767b\u9646\u5386\u53f2"),s.a.createElement(v,{history:this.props.history}))))}}]),t}(n.Component)),y=function(){return s.a.createElement(c.a,null,s.a.createElement(o.c,null,s.a.createElement(o.a,{exact:!0,path:"/",component:N}),s.a.createElement(o.a,{exact:!0,path:"/userlist",component:j})))};r.a.render(s.a.createElement(y,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.d4ef97d2.chunk.js.map